[%- WRAPPER "layout.tt" title=title ? artist.name _ " - ${title}" : artist.name -%]
  <div id="content">
    [%- INCLUDE "artist/header.tt" -%]
    [%- content -%]
    [%- last_updated(artist) -%]
  </div>

  [%- IF !full_width -%]
    [% WRAPPER 'layout/sidebar.tt' %]
        [%- show_image() -%]

        <h2 class="artist-information">[% l('Artist information') %]</h2>
        [% WRAPPER 'layout/sidebar/properties.tt' %]
            [% INCLUDE 'layout/sidebar/property.tt' label=l('Sort name:')
               content=html_escape(artist.sort_name) class="sort-name"
                   IF artist.name != artist.sort_name -%]
            [% INCLUDE 'layout/sidebar/property.tt' label=l('Type:')
               content=html_escape(artist.l_type_name) class="type"
                   IF artist.type -%]
            [% INCLUDE 'layout/sidebar/property.tt' label=l('Gender:')
               class="gender"
               content=html_escape(artist.l_gender_name)
                   IF artist.gender -%]
            [%- UNLESS artist.begin_date.is_empty AND artist.end_date.is_empty AND !artist.ended AND !artist.begin_area AND !artist.end_area -%]
                    [%- IF artist.begin_date.format %]
                        [% date_period_label = artist_begin_label_from_type(artist.type_id) %]
                        [% WRAPPER 'layout/sidebar/property.tt' label=date_period_label %]
                            [% artist.begin_date.format %]
                            [% IF artist.has_age AND not artist.end_date.format %]
                                (<span style="display:none">[% display_age(artist.age) %]</span>[% display_age_ago(artist.age) %])
                            [% END %]
                        [% END %]
                    [%- END -%]
                    [%- IF artist.begin_area %]
                        [% INCLUDE 'layout/sidebar/property.tt' label= artist_begin_area_label_from_type(artist.type_id)
                            content=link_area_with_containment(artist.begin_area)
                            class="begin_area"
                        %]
                    [%- END -%]
                    [% date_period_label = artist_end_label_from_type(artist.type_id) %]
                    [% IF artist.end_date.format %]
                        [% WRAPPER 'layout/sidebar/property.tt' label=date_period_label %]
                            [% artist.end_date.format %]
                            [% IF artist.has_age %]
                                ([% display_age(artist.age, artist.type_id == 1) %])
                            [% END %]
                        [% END %]
                    [% ELSIF artist.ended %]
                        [% WRAPPER 'layout/sidebar/property.tt' label=date_period_label %]
                            [% l('[unknown]') %]
                        [% END %]
                    [% END %]
                    [%- IF artist.end_area %]
                        [% INCLUDE 'layout/sidebar/property.tt' label= artist_end_area_label_from_type(artist.type_id)
                            content=link_area_with_containment(artist.end_area)
                            class="end_area"
                        %]
                    [%- END -%]
            [%- END -%]
            [% INCLUDE 'layout/sidebar/property.tt' label=l('Area:')
               content=link_area_with_containment(artist.area)
               class="area"
                   IF artist.area -%]
            [%- FOR ipi_code IN artist.ipi_codes -%]
              [% INCLUDE 'layout/sidebar/property.tt' label=l('IPI code:')
                 content=html_escape(ipi_code.ipi) class="ipi-code" %]
            [%- END -%]
            [%- FOR isni_code IN artist.isni_codes -%]
              [% INCLUDE 'layout/sidebar/property.tt' label=l('ISNI code:')
                 content=link_isni(isni_code.isni) class="isni-code" %]
            [%- END -%]
        [% END %]

        [%- INCLUDE "layout/sidebar/sidebar-rating.tt" entity=artist -%]
        [%- INCLUDE "layout/sidebar/sidebar-tags.tt" entity=artist tags=top_tags
            more=more_tags tag_this_text=l('Tag this artist')
            async = c.uri_for_action('/artist/tag_async', [ artist.gid ])
            -%]

        [% IF c.user_exists && !artist.is_special_purpose %]
        <h2 class="subscriptions">[% l("Subscriptions") %]</h2>
        <ul class="links">
            [% IF c.user_exists && !artist.is_special_purpose %]
                [% IF subscribed %]
                    <li><a href="[% c.uri_for_action('/account/subscriptions/artist/remove', { id => artist.id }) %]">[% l('Unsubscribe') %]</a></li>
                [% ELSE %]
                    <li><a href="[% c.uri_for_action('/account/subscriptions/artist/add', { id => artist.id }) %]">[% l('Subscribe') %]</a></li>
                [% END %]
                <li>[% link_entity(artist, 'subscribers', l('Subscribers')) %]</li>
            [% END %]
        </ul>
        [% END %]

        [%- INCLUDE "layout/sidebar/sidebar-favicons.tt" source=artist -%]
        [%- INCLUDE "layout/sidebar/sidebar-affiliates.tt" source=artist -%]
    [% END %]
  [%- END -%]
[%- END -%]
